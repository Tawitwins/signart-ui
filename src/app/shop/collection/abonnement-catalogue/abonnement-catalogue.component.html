<app-breadcrumb [title]="'Abonnement'" [breadcrumb]="'Abonnement'"></app-breadcrumb>
<!-- section start -->
<section class="section-b-space">
    <div class="collection-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
    
                    <div class="collection-filter" [class.openFilterbar]="mobileSidebar">
                        <!-- side-bar colleps block stat -->
                        <div class="collection-filter-block">
                            <div class="collection-mobile-back" (click)="toggleMobileSidebar()">
                                <span class="filter-back">
                                    <i class="fa fa-angle-left" aria-hidden="true"></i> Retour
                                </span>
                            </div>
                            <!-- Category filter start -->
                             <!--app-categories></app-categories-->

                             <div class="collection-collapse-block border-0" [class.open]="collapseCategorie">
                                <h3 class="collapse-block-title" (click)="collapseCategorie = !collapseCategorie">Techniques</h3>
                                <div class="collection-collapse-block-content">
                                    <div class="collection-brand-filter">
                                        <ul class="category-list">
                                            <li>
                                                <a 
                                                (click)="resetFilterCategorie()" *ngIf="techSelect !== 'Tout'" style="cursor: pointer;">
                                                    Tout
                                                </a>
                                                <a (click)="resetFilterCategorie()" style="cursor: pointer;  color:#9b1104;" *ngIf="techSelect === 'Tout'">
                                                    Tout
                                                </a>
                                            </li>
                                            <li *ngFor="let category of filterbyCategory">
                                                <a 
                                                (click)="updateFilterCategorie(category)" style="cursor: pointer;" *ngIf="techSelect !== category">
                                                    {{ category}}
                                                </a>
                                                <a 
                                                (click)="updateFilterCategorie(category)" style="cursor: pointer; color:#9b1104;" *ngIf="techSelect === category">
                                                    {{ getTechniqueName(category) }}
                                                </a>
                                            </li>                               
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- side-bar colleps block stat -->
                        <div class="collection-filter-block">
                           
                            <!-- price filter start here -->
                            <!--app-price [min]="minPrice" [max]="maxPrice" (priceFilter)=" updateFilterPrice()">
                            </app-price-->

                            <div class="collection-collapse-block border-0" [class.open]="collapse">
                                <h3 class="collapse-block-title" (click)="collapse = !collapse">Annee</h3>
                                <div class="collection-collapse-block-content">
                                    <div class="collection-brand-filter">
                                        <div class="mt-2">
                                            <ng5-slider 
                                                [(value)]="minYears" 
                                                [(highValue)]="maxYears" 
                                                [(options)]="options" 
                                                (userChangeEnd)="updateFilterAnnee()">
                                            </ng5-slider>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="collection-sidebar-banner">
                            <a [routerLink]="['/shop/collection/left/sidebar']">
                                <img src="assets/images/banner/banner2.jpg" class="img-fluid" alt="banner">
                            </a>
                        </div>

                        <div class="collection-sidebar-banner">
                            <iframe width="100%" height="315" src="https://www.youtube.com/embed/5QCnz4yOCUI?controls=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <!-- side-bar banner end here  *ngIf="!loader"-->
                    </div>
                </div>
                <div class="collection-content col">
                    <div class="page-main-content">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="top-banner-wrapper">
                                    <!--section class="secbor">
                                        <video width="100%" height="300px" preload="auto" autoplay="autoplay" loop >
                                          <source src="assets/images/banner/animation.mp4" type="video/mp4">
                                          </video>
                                        </section-->
                                    <div class="top-banner-content small-section">
                                        <h4>ABONNEMENT</h4>
                                        <h5>Abonnement à des oeuvres d'art numérisées
                                        </h5>
                                        <p>
                                            L’Abonnement permet au client de bénéficier d’une acquisition temporaire d’œuvres d’art qu’il pourra visualiser sur un écran numérique. Le client aura la possibilité d'afficher une variété d’œuvres d'art dans un seul cadre (écran numérique), apportant de la flexibilité à l'achat d'art.

                                            SignArt cherche à créer de nouvelles façons d'améliorer et de vivre les espaces dans lesquels nous vivons.
                                        </p>
                                    </div>
                                </div>
                                <section class="tab-product m-0">
                                    <div class="row">
                                      <div class="col-sm-12 col-lg-12">
                                        <ngb-tabset [type]="'tabs'" class="nav-material">
                                            <ngb-tab>
                                                <ng-template ngbTabTitle>Catalogue</ng-template>
                                                <ng-template ngbTabContent>
                                                 <div>
                                                    <div class="row">
                                                        <div class="col-xl-12">
                                                            <div class="filter-main-btn" (click)="toggleMobileSidebar()">
                                                                <span class="filter-btn btn btn-theme">
                                                                    <i class="fa fa-filter" aria-hidden="true"></i> Filtre
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <ul class="product-filter-tags">
                                                        <li class="mr-1" *ngFor="let tag of tags">
                                                            <a href="javascript:void(0)" class="filter_tag">
                                                                {{tag}} <i class="ti-close" (click)="removeTag(tag)"></i>
                                                            </a>
                                                        </li>
                                                        <li class="clear_filter" *ngIf="tags.length > 0">
                                                            <a href="javascript:void(0)" class="clear_filter" (click)="removeAllTags()">
                                                                Effacer
                                                            </a>
                                                        </li>
                                                    </ul>
                                                    <div class="collection-product-wrapper" id="products">
                                                        <app-grid [oeuvres]="oeuvres" [paginate]="paginate" [layoutView]="layoutView" [sortBy]="sortBy" (setGrid)="updateGridLayout($event)" (setLayout)="updateLayoutView($event)" (sortedBy)="sortByFilter($event)">
                                                        </app-grid>
                                                        <section class="search-block">
                                                            <div class="container">
                                                              <div class="row">
                                                                <div class="col-lg-6 offset-lg-3">
                                                                    <div class="form-header">
                                                                    <div class="form-group">
                                                                      <input type="text" class="form-control" [(ngModel)]="searchTerm" placeholder="Recherchez une oeuvre">
                                                                    </div>
                                                                    <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
                                                                </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </section>
                                                        <div class="product-wrapper-grid" [ngClass]="layoutView">      
                                                            <div class="row">
                                                                <div class="col-grid-box" [ngClass]="grid" *ngFor="let img of imageFiltres | slice: (pag-1) * pageSize : (pag-1) * pageSize + pageSize">
                                                                    <div class="product-box">
                                                                          <!--div *ngIf="!loader">
                                                                            <div class="img-wrapper">
                                                                              <div class="front">
                                                                                <a title="Quick View" (click)="QuickView.openModal()">
                                                                                  <img 
                                                                                    [src]="domSanitizer.bypassSecurityTrustUrl('data:image/jpg;base64,'+img.avatar.value)" 
                                                                                    [lazyLoad]="domSanitizer.bypassSecurityTrustUrl('data:image/jpg;base64,'+img.avatar.value)" 
                                                                                    class="img-fluid lazy-loading" 
                                                                                    alt="{{ img?.titre }}"/>
                                                                                </a>
                                                                              </div>
                                                                            </div>
                                                                            <div class="product-detail">
                                                                              <div>
                                                                                <bar-rating [rate]="5" [readOnly]="true"></bar-rating>
                                                                                <a>
                                                                                  <h6>{{getArtisteName(img?.identiteAuteur)}} -- {{img?.annee }}</h6>
                                                                                </a>
                                                                                <h4>
                                                                                 {{img?.titre | titlecase }}  
                                                                                </h4>
                                                                                
                                                                              </div>
                                                                              <a href="javascript:void(0)" title="Add to cart">
                                                                                <i class="ti-plus"></i>
                                                                            </a>
                                                                            </div>
                                                                          </div-->
                                                                          <!--app-skeleton-product-box *ngIf="loader"></app-skeleton-product-box>
                                                                          <quick-view-oeuvre-numerique #quickView [oeuvreNumerique]="img" [currency]="currency"></quick-view-oeuvre-numerique-->
                                                                            <oeuvre-numerique-box-one [oeuvreNumerique]="img" [thumbnail]="false" [cartModal]="true" [loader]="true">
                                                                            </oeuvre-numerique-box-one>     
                                                                    </div>
                                                                </div>
                                                                <!--div class="col-sm-12 text-center section-b-space mt-5 no-found" *ngIf="!oeuvres.length">
                                                                    <img src="assets/images/empty-search.jpg" class="img-fluid mb-4">
                                                                    <h3>Sorry! Couldn't find the product you were looking For!!! </h3>
                                                                    <p>Please check if you have misspelt something or try searching with other words.</p>
                                                                    <a [routerLink]="['/shop/collection/left/sidebar']" class="btn btn-solid">continue shopping</a>
                                                                </div-->
                                                            </div>
                                                        </div>
                                                        <ngb-pagination [collectionSize]="imageFiltres.length" [(page)]="pag" [pageSize]="pageSize" aria-label="Default pagination">
                                                        </ngb-pagination>
                                                    </div>
                                                 </div>
                                                </ng-template>
                                            </ngb-tab>
                                            <ngb-tab>
                                                <ng-template ngbTabTitle> Liste de selection </ng-template>
                                                <ng-template ngbTabContent>
                                                  <div class="container" *ngIf="pageFormu == 0">
                                                    <div class="col-sm-12 empty-cart-cls text-center" *ngIf="!oeuvresNumeriques.length">
                                                        <img src="assets/images/icon-empty-cart.png" class="img-fluid mb-4">
                                                        <h3><strong>Votre liste est vide</strong></h3>
                                                        <h4>ajouter quelque chose :)</h4>
                                                        </div>
                                                    <div class="row" *ngIf="oeuvresNumeriques.length">
                                                        <div class="col-sm-12">
                                                            <table class="table cart-table table-responsive-xs">
                                                                <thead>
                                                                    <tr class="table-head">
                                                                        <th scope="col">Image</th>
                                                                        <th scope="col">Titre</th>
                                                                        <th scope="col">Auteur</th>
                                                                        <th scope="col">Annee</th>
                                                                        <th scope="col">Prix</th>
                                                                        <th scope="col">Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody *ngFor="let imgSelect of oeuvresNumeriques">
                                                                    <tr >
                                                                        <td>
                                                                            <img [src]="domSanitizer.bypassSecurityTrustUrl('data:image/jpg;base64,'+getOeuvreImage(imgSelect.id)?.value)" alt="" style="width:100px; height: 120px;">
                                                                        </td>
                                                                        <td style="vertical-align: middle;">
                                                                            <a >{{imgSelect.titre}}</a>
                                                                        </td>
                                                                        <td style="vertical-align: middle;">
                                                                            <h5>
                                                                                {{getArtisteName(imgSelect.identiteAuteur)}}
                                                                            </h5>
                                                                        </td>
                                                                        <td style="vertical-align: middle;">
                                                                            <h5>
                                                                                {{imgSelect.annee}}
                                                                            </h5>
                                                                        </td>
                                                                        <td style="vertical-align: middle;">
                                                                            <h5 class="td-color">
                                                                                {{imgSelect.tarif | currency:productService?.Currency.currency:'symbol' }}
                                                                            </h5>
                                                                        
                                                                        </td>
                                                                        <td style="vertical-align: middle;">
                                                                            
                                                                            <a href="javascript:void(0)" (click)="removeListItem(imgSelect)" class="icon">
                                                                                <i class="ti-close"></i>
                                                                            </a>    
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <table class="table cart-table table-responsive-md">
                                                                <tfoot>
                                                                    <tr>
                                                                        <td>montant total :</td>
                                                                        <td>
                                                                            <h4> {{ getTotal | async | currency:productService?.Currency.currency:'symbol'}}</h4>
                                                                        </td>
                                                                    </tr>
                                                                </tfoot>
                                                            </table>
                                                        </div>
                                                        </div>
                                                        <div class="row cart-buttons" *ngIf='oeuvresNumeriques.length'>
                                                            <div class="col-6">
<<<<<<< HEAD
                                                                <a (click)="saveListe()" class="btn btn-solid-Valider">Valider</a>
=======
                                                                <a href="javascript:void(0)" (click)="saveListe()" class="btn btn-solid">Valider</a>
>>>>>>> 9f0b2e1faa82927c220ddabbdf601b653996f650
                                                            </div>
                                                            
                                                        </div>
                                                   </div>
                                                   <div class="container" *ngIf="pageFormu == 1">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <br><br>
                                                            <h4>Veuillez remplir le formulaire d'abonnement</h4><br>
                                                            <div class="theme-card">
                                                                <form class="theme-form" novalidate="" [formGroup]="abonneeForm" class="text-center">
                                                                    <div class="form-row">
                                                                      <div class="col-md-6">                             
                                                                        <select type="select" class="form-control" placeholder="Nom" (change)="choisirPays($event)" formControlName="pays" [(ngModel)]="clientAdresse.libellePays" required>     
                                                                            <option *ngFor="let p of allPays" [value]="p.code">{{p.libelle}}</option>                                                                       <option *ngFor="let p of allPays" [value]="p.code">{{p.libelle}}</option>
                                                                        </select>
                                                                      </div>
                                                                    </div>
                                                                    <hr>
                                                                    <div class="form-row">
                                                                        <div class="col-md-6">
                                                                            <input type="text" class="form-control" formControlName="prenom" autocomplete="off" [(ngModel)]="clientAdresse.prenom" placeholder="Prénom(s)" required="">
                                                                        </div>
                                                                        
                                                                        <div class="col-md-6">
                                                                            <input type="text" class="form-control" placeholder="Nom" formControlName="nom" [(ngModel)]="clientAdresse.nom" autocomplete="off" required="">
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    <br><br>
                                                                    <div class="form-row">
                                                                        <div class="col-md-6">
                                                                            <input type="text" class="form-control" formControlName="telephone" [(ngModel)]="indicatifpays" placeholder="00 221 70 000 00 00" required="">
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <input type="email" class="form-control" placeholder="E-mail" required="" formControlName="email" [(ngModel)]="userConnect.email" autocomplete="off">
                                                                        </div>
                                                                    </div>
                                                                    <br><br>
                                                                    <div class="form-row">
                                                                        <div class="col-md-6">
                                                                            <input type="text" class="form-control" formControlName="region" [(ngModel)]="clientAdresse.region" autocomplete="off" placeholder="Region" required="">
                                                                        </div>
                                                                        
                                                                        <div class="col-md-6">
                                                                            <input type="text" class="form-control" placeholder="Ville" [(ngModel)]="clientAdresse.ville" formControlName="ville" autocomplete="off" required="">
                                                                        </div>                                                                             
                                                                    </div><br><br>
                                                                    <div class="form-row">
                                                                        <div class="col-md-12">
                                                                            <input type="text" class="form-control" formControlName="adresse" [(ngModel)]="clientAdresse.adresse" autocomplete="off" placeholder="Votre adresse..." required="">
                                                                        </div>                                                                             
                                                                    </div>
                                                                    <br><br><hr>
                                                                    <div class="form-row">
                                                                        <div class="col-md-6">
<<<<<<< HEAD
                                                                            <button type="submit" class="btn btn-solid-Annuler" >Anuler</button>
=======
                                                                            <button type="submit" class="btn btn-solid" (click)="pageFormu = 0" style="background: red;" >Annuler</button>
>>>>>>> 9f0b2e1faa82927c220ddabbdf601b653996f650
                                                                        </div> 
                                                                        <div class="col-md-6">
                                                                            <button class="btn btn-solid-Valider" type="submit" (click)="onSubmitFormuAbonne()">Continuer</button>
                                                                        </div> 
                                                                       
                                                                    </div>
                                                                    
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                   </div>
                                                   <div class="container" *ngIf="pageFormu == 2">
                                                    <form class="theme-form" novalidate="" [formGroup]="terminalDelaiForm" class="text-center">
                                                        <br><br>
                                                        <h4>Veuillez Choisir un terminal d'affichage</h4>
                                                        <br><br>
                                                        <div class="form-row">    
                                                            <div class="col-md-6" *ngFor="let terminal of terminals">
                                                                <div class="card profile-card-2">
                                                                    <div class="card-body pt-5">
                                                                        <a><h5 class="card-title">{{terminal.libelle}}</h5></a>
                                                                        <p class="card-text">{{terminal.description}}</p>
                                                                        <a><h5 class="card-title">Prix : {{terminal.prix}} FCFA</h5></a>
                                                                        <input type="radio" class="register-gender-radio" value={{terminal.id}} formControlName="terminalId">
                                                                    </div>
                                                                </div>
                                                            </div>             
                                                        </div>
                                                        <br><br>
                                                        <div class="form-row">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-6" style="text-align: center;">
                                                                <textarea placeholder="Si vous disposez d'un ecran, veuillez saisir ses caracteristiques(dimensions, marque, modéle...)" formControlName="precisions" style="width: 500px;height: 70px;"></textarea> 
                                                            </div>
                                                            <div class="col-md-3">
                                                            </div>
                                                        </div>  
                                                        <br><br>
                                                        <hr>
                                                        <h4>Veuillez Choisir un delai d'abonnement</h4>
                                                        <br><br>
                                                        <div class="form-row">
                                                            <div class="col-xl-3" *ngFor="let delai of delais">
                                                                <div class="marron">
                                                                    <div class="side-l">
                                                                      <h5>{{delai.libelle}} - {{delai.prix}}</h5> 
                                                                      <p class="col-p">{{delai.description}}</p>
                                                                      <h5>Prix : {{delai.prix}} FCFA</h5> 
                                                                    </div>
                                                                  <input type="radio" class="register-gender-radio" value={{delai.id}} formControlName="delaiId">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br><br>
                                                        <hr>
                                                        <div class="form-row">
                                                            <div class="col-md-6">
<<<<<<< HEAD
                                                                <button type="submit" class="btn btn-solid-Annuler" >Anuler</button>
=======
                                                                <button type="submit" class="btn btn-solid" (click)="pageFormu = 0" style="background: red;" >Annuler</button>
>>>>>>> 9f0b2e1faa82927c220ddabbdf601b653996f650
                                                            </div> 
                                                            <div class="col-md-6">
                                                                <button class="btn btn-solid-Valider" type="submit" (click)="onSubmitFormuTermi()">Continuer</button>
                                                            </div> 
                                                           
                                                        </div>
                                                        
                                                    </form>
                                                   </div>
                                                   <div class="container" *ngIf="pageFormu == 3">
                                                    <br><br>
                                                    <h4>Récapitulatif de votre abonnement</h4>
                                                    <br><br>
                                                    <div class="row order-success-sec">
                                                        <div class="col-sm-6">
                                                            <h4>Informations personnels</h4>
                                                            <ul class="total-sec">
                                                                <li>Nom: {{abonne.nom}}</li><br>
                                                                <li>Prenom: {{abonne.prenom}}</li><br>
                                                                <li>Telephone: {{abonne.telephone}}</li><br>
                                                                <li>Email: {{abonne.email}}</li><br>
                                                                <li>Pays: {{abonne.pays}}</li><br>
                                                                <li>Region: {{abonne.region}}</li><br>
                                                                <li>Ville: {{abonne.ville}}</li><br>
                                                                <li>Adresse: {{abonne.adresse}}</li><br>
                                                            </ul>
                                                        </div><br>
                                                        <hr>
                                                        <div class="col-sm-6">
                                                          <div class="total-sec">
                                                            <h4>Choix Delai et Terminal</h4>
                                                            <ul>
                                                                <li>Terminal: {{terminalDelai.terminalLibelle}} - <span>{{terminalChoisi.prix}}</span></li><br>
                                                                <li>Delai: {{terminalDelai.delaiLibelle}} - <span> {{delaiChoisi.prix}}</span></li><br> 
                                                            </ul>
                                                          </div><br>
                                                          <div class="total-sec">
                                                            <h4>Montant total des oeuvres</h4>
                                                            <ul>
                                                                <li>Total Oeuvre: <span>{{ getTotal | async | currency:productService?.Currency.currency:'symbol'}}</span></li><br>
                                                            </ul>
                                                        </div>
                                                        </div><br>
                                                        </div><br>
                                                        <hr>
                                                        <div class="col-sm-6">
                                                        
                                                        <div class="col-sm-6">
                                                        <div class="final-total">
                                                            <h3>Montant Total <span>{{montantTotal | currency:productService?.Currency.currency:'symbol'}}</span></h3>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    <br><hr>
                                                    <div class="form-row">
                                                        <div class="col-md-6">
                                                            <button type="submit" class="btn btn-solid-Annuler" (click)="pageFormu = 0" >Annuler</button>
                                                        </div> 
                                                        <div class="col-md-6">
                                                            <button class="btn btn-solid-Valider" type="submit" (click)="onSubmitFinal();">Soumettre</button>
                                                        </div> 
                                                       
                                                    </div>

                                                   </div>
                                                   <ngx-ui-loader [loaderId]="'loader-01'" logoUrl="assets/images/icon/LogoGif.gif" logoSize="300" fgsType="rectangle-bounce" fgsColor="rgba(255,255,255,0.8)" [hasProgressBar]="false" logoPosition="center-center" overlayColor="rgba(255,255,255,0.8)"  blur="1"></ngx-ui-loader>

                                                </ng-template>
                                            </ngb-tab>
                                        </ngb-tabset>
                                      </div>
                                    </div>
                                  </section>                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
</section>
<!-- section End -->